
<div class="mb-4">
    <a class="btn btn-primary btn-sm" onclick="gotoNewRecord()" > 新建预约 <span class="fa fa-plus-circle"></span></a>
{#    <a class="btn btn-primary btn-sm" href="{% url 'record:import' pk %}">#}
{#        导入易看牙病历<span class="fa fa-file-import"></span> </a>#}
</div>

<div class="span4">
    {% if records %}
        <table class="table table-hover">
            <tr>
                <th>预约时间</th>
                <th>备注</th>
                <th>创建时间</th>
                <th>修改</th>
            </tr>

            {% for record in records.all  %}
                <tr>
                    <td style="font-size: medium; background-color:#00c0ef ">{{ record.startDateTime }}</td>
                    <td>{{ record.comment }}</td>
                    <td>{{ record.createDateTime }}</td>
                    <td>
                        <a href="{% url 'appointment:edit'  pk record.pk %}"  class="label label-info" data-toggle="modal" data-target="#myModal2">
                            修改 <span class="fa fa-edit"></span>
                        </a>
                    </td>
                </tr>
            {% endfor %}

        </table>


{#        <a href="{% url 'record:editRecord' pk record.pk %}"  class="label label-info" data-toggle="modal" data-target="#myModal2">#}
{#            编辑 <span class="fa fa-edit"></span>#}
{#        </a>#}

    {% else %}
        <hr>
        <p>该患者暂无病例，请创建新病例。</p>
    {% endif %}
</div>




<!-- 模态框（Modal） -->
<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    模态框（Modal）标题
                </h4>
            </div>
            <div class="modal-body">
                在这里添加一些文本
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">关闭
                </button>
                <button type="button" class="btn btn-primary">
                    提交更改
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>


<!-- 编辑 模态框（Modal） -->
<div class="modal " id="myModal2" tabindex="-2" role="dialog"
     aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close"
                        data-dismiss="modal" aria-hidden="true">
                    &times;
                </button>
                <h4 class="modal-title" id="myModalLabel">
                    模态框（Modal）标题
                </h4>
            </div>
            <div class="modal-body">
                在这里添加一些文本
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default"
                        data-dismiss="modal">关闭
                </button>
                <button type="button" class="btn btn-primary">
                    提交更改
                </button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal -->
</div>



<script>
    function gotoNewRecord() {
        $.get("{% url 'appointment:newRecord' pk %}", function (r) {
            $("#detail3").html(r);
        });
    }

    function delRecord(ppk, repk) {
        $.get("/record/del/"+ ppk +'/'+repk, function (r) {
            $("#detail3").html(r);
        });
    }

    $(function () {
        $('#myModal2').on('hidden.bs.modal', function (e) {
            // do something...//alert("做些操作");
            //$(this).removeData("bs.modal");
            $.get("/appt/"+ {{ pk }}, function (r) {
                $("#detail3").html(r);
            });
        });
    });
    {#$(document).ready(#}
    {#    //等待两秒后隐藏通知#}
    {#    setTimeout(function () {#}
    {#         $('.alert').slideUp();#}
    {#    }, 2000)#}
    {#)#}
</script>

{#</body>#}
{#</html>#}